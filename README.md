# 🏆 기네스 리더보드 대시보드

엑셀 데이터 기반 실시간 성적 순위 시스템

![React](https://img.shields.io/badge/React-18.2-blue?logo=react)
![TypeScript](https://img.shields.io/badge/TypeScript-5.2-blue?logo=typescript)
![Vite](https://img.shields.io/badge/Vite-5.0-purple?logo=vite)
![TailwindCSS](https://img.shields.io/badge/Tailwind-3.4-cyan?logo=tailwindcss)

## ✨ 주요 기능

### 📊 동적 랭킹 시스템
- **지점 탭**: 사용자 선택 시 동일 지점단 내 순위, 미선택 시 전체 순위
- **지역단 탭**: 사용자 선택 시 동일 지역 내 순위, 미선택 시 전체 순위  
- **신인 탭**: 차월 12개월 이하 직원만 필터링 (사용자 선택 시 동일 지점단 내 신인만)

### 🎯 개인 맞춤 기능
- 사번으로 직원 검색
- 본인 순위 하이라이트 표시 (주황색 테두리)
- 개인 통계 실시간 표시
  - 현재 탭 기준 참가자 수
  - 내 순위
  - 내 포인트

### 🏅 TOP 3 시각화
- 1위: 🏆 금색 시상대 (가장 높음)
- 2위: 🥈 은색 시상대
- 3위: 🥉 동메달 시상대
- 애니메이션 효과로 탭 전환 시 부드러운 전환

### 📰 실시간 뉴스 마퀴
- 현재 1위 선수 정보 자동 표시
- 신인 1위 정보
- 전체 참가자 수
- 자동 스크롤 애니메이션

### 📤 엑셀 파일 관리
- 드래그 앤 드롭 또는 버튼 클릭으로 업로드
- 자동 데이터 파싱 및 검증
- **초기 데이터 없음 - 엑셀 업로드 필수** ⚠️
- 실시간 데이터 업데이트

### 🎨 동적 UI
- 지점별 자동 색상 할당 (7가지 색상 팔레트)
- 스와이프 제스처로 탭 전환 (모바일 최적화)
- 반응형 디자인
- 부드러운 애니메이션 효과

## 📋 엑셀 파일 형식

### 필수 컬럼

| 컬럼명 | 설명 | 예시 |
|--------|------|------|
| **지점** | 지점명 | 정동, 불광, 로얄 |
| **지역단** | 지역단명 | 서울, 경기, 부산 |
| **사번** | 직원 사번 (고유값) | 1000001 |
| **이름** | 직원 이름 | 김민준 |
| **성적** | 성과 점수 | 850000 |
| **차월** | 재직 개월 수 | 24 |

### 예시

| 지점 | 지역단 | 사번 | 이름 | 성적 | 차월 |
|------|--------|------|------|---------|------|
| 정동 | 서울 | 1000001 | 김민준 | 850000 | 24 |
| 불광 | 서울 | 1000002 | 이서연 | 820000 | 36 |
| 로얄 | 경기 | 1000003 | 박지호 | 795000 | 18 |

### 엑셀 파일 준비 방법

1. **엑셀 파일 생성**: Excel 또는 Google Sheets에서 위 형식대로 작성
2. **파일 저장**: `.xlsx` 또는 `.xls` 형식으로 저장
3. **업로드**: 앱에서 "엑셀 파일 업로드" 버튼 클릭하여 업로드

⚠️ **주의**: 초기 데이터 없음 - 엑셀 파일 업로드 필수!

## 🚀 실행 방법

### 1. 의존성 설치

```bash
npm install
```

### 2. 서버 실행 (필수! ⚠️)

**백엔드 서버를 먼저 실행해야 합니다:**

```bash
npm run server
```

서버가 `http://localhost:3001`에서 실행됩니다.

**서버가 제공하는 기능:**
- 관리자가 업로드한 엑셀 파일을 모든 사용자에게 공유
- 파일 영구 저장 (서버 재시작해도 유지)
- 초기 로드 시 기본 파일 제공

### 3. 개발 서버 실행

**새 터미널 창을 열어서** 프론트엔드 실행:

```bash
npm run dev
```

브라우저에서 `http://localhost:5173` 접속

### 4. 프로덕션 빌드

```bash
npm run build
```

빌드된 파일은 `dist/` 폴더에 생성됩니다.

### 5. 프로덕션 미리보기

```bash
npm run preview
```

### ⚙️ 실행 순서 요약

```bash
# 터미널 1: 백엔드 서버
npm run server

# 터미널 2: 프론트엔드 개발 서버
npm run dev
```

## 📱 사용 방법

### 초기 설정

1. **서버 실행** (필수!)
   - 백엔드 서버 시작: `npm run server`
   - 서버가 `http://localhost:3001`에서 실행됨

2. **앱 실행**
   - 개발 서버 시작: `npm run dev`
   - 브라우저에서 `http://localhost:5173` 접속

3. **엑셀 파일 업로드** (필수!)
   - 앱 화면에서 "엑셀 파일 업로드" 버튼 클릭
   - 위의 "엑셀 파일 형식"에 맞게 작성한 엑셀 파일 선택
   - 업로드 완료 후 대시보드 자동 표시

### 일반 사용자

1. **사번 검색**
   - 사번 입력란에 본인 사번 입력
   - "검색" 버튼 클릭 또는 Enter 키

2. **순위 확인**
   - 본인 순위가 주황색으로 하이라이트됨
   - 지점/지역단/신인 탭 전환하여 다양한 순위 확인
   - 스와이프로 탭 전환 가능 (모바일)

3. **개인 통계 확인**
   - 하단에 참가자 수, 내 순위, 내 포인트 표시

### 관리자

1. **데이터 업데이트**
   - "엑셀 파일 업로드" 버튼 클릭
   - 새로운 엑셀 파일 선택
   - 자동으로 데이터 파싱 및 업데이트

2. **데이터 확인**
   - 업로드 후 로드된 데이터 수 확인
   - 각 탭에서 데이터 정상 표시 확인

## 🛠️ 기술 스택

### Frontend
- **React 18.2** - UI 라이브러리
- **TypeScript 5.2** - 타입 안정성
- **Vite 5.0** - 빌드 도구
- **Tailwind CSS 3.4** - 스타일링

### Backend
- **Node.js** - 서버 런타임
- **Express.js** - 웹 서버 프레임워크
- **Multer** - 파일 업로드 처리
- **CORS** - Cross-Origin 요청 지원

### Libraries
- **xlsx 0.18.5** - 엑셀 파일 파싱
- **lucide-react 0.294** - 아이콘 라이브러리

### Development
- **ESLint** - 코드 품질
- **PostCSS** - CSS 후처리
- **Autoprefixer** - 브라우저 호환성

## 🏗️ 시스템 아키텍처

```
┌─────────────────┐
│  관리자         │
│  (엑셀 업로드)   │
└────────┬────────┘
         │ POST /api/upload
         ↓
┌─────────────────────┐
│  Express 서버       │
│  (localhost:3001)   │
│  - 파일 저장        │
│  - 파일 제공        │
└────────┬────────────┘
         │ GET /api/data
         ↓
┌─────────────────┐
│  일반 사용자     │
│  (리더보드 조회) │
└─────────────────┘
```

### 데이터 흐름

1. **초기 상태**: 서버에 파일이 없으면 빈 화면 표시 (엑셀 업로드 필수!)
2. **관리자 업로드**: 엑셀 파일 → 서버 → `uploads/latest.xlsx`로 저장
3. **사용자 접속**: 서버에서 `latest.xlsx` 다운로드 → 화면 렌더링
4. **데이터 공유**: 모든 사용자가 같은 파일을 보게 됨

## 📂 프로젝트 구조

```
dashboard/
├── public/                        # 정적 파일 폴더 (비어있음)
├── uploads/                       # 서버에 업로드된 파일 저장 폴더
│   └── latest.xlsx                # 관리자가 업로드한 최신 파일 (업로드 후 생성됨)
├── src/
│   ├── components/
│   │   ├── AdminUpload.tsx        # 관리자 업로드 페이지
│   │   ├── Dashboard.tsx          # 메인 대시보드
│   │   └── Login.tsx              # 로그인 페이지
│   ├── types/
│   │   └── index.ts               # TypeScript 타입 정의
│   ├── utils/
│   │   └── dataProcessor.ts       # 데이터 처리 유틸
│   ├── App.tsx                    # 메인 앱 컴포넌트
│   ├── index.css                  # 전역 스타일
│   └── main.tsx                   # 엔트리 포인트
├── server.cjs                     # Express 백엔드 서버 ⭐
├── remixed.tsx                    # 단일 페이지 리더보드 (독립 실행 가능)
├── package.json
├── tsconfig.json
├── vite.config.ts
└── tailwind.config.js
```

## 🎯 핵심 컴포넌트

### server.cjs - 백엔드 서버 ⭐
모든 사용자가 같은 데이터를 볼 수 있게 하는 서버

**API 엔드포인트:**

| 메서드 | 경로 | 설명 | 사용자 |
|--------|------|------|--------|
| POST | `/api/upload` | 엑셀 파일 업로드 | 관리자 |
| GET | `/api/data` | 엑셀 파일 다운로드 | 모두 |
| GET | `/api/health` | 서버 상태 확인 | 모두 |
| GET | `/api/info` | 파일 정보 조회 | 모두 |

**파일 저장 방식:**
- 업로드된 파일은 `uploads/latest.xlsx`로 저장
- 항상 최신 파일로 덮어씀 (히스토리 없음)
- 서버 재시작해도 파일 유지

### remixed.tsx - 단일 페이지 리더보드
로그인 없이 바로 사용 가능한 독립 컴포넌트

**주요 기능:**
- 서버에서 엑셀 파일 자동 로드
- 관리자용 파일 업로드 (서버로 전송)
- 사번 검색
- 동적 랭킹 계산
- TOP 3 시각화
- 실시간 뉴스 마퀴

**State 관리:**
```typescript
interface EmployeeData {
  region: string;        // 지역
  branch: string;        // 지점단
  employeeId: string;    // 사번
  name: string;          // 이름
  points: number;        // 성적
  months: number;        // 차월
  change: 'up' | 'down' | 'stable';
}
```

## 🔄 데이터 흐름

### 관리자가 파일 업로드할 때

```
관리자 → 파일 선택
    ↓
FormData로 서버에 POST /api/upload
    ↓
서버: uploads/latest.xlsx 저장
    ↓
클라이언트: GET /api/data로 재로드
    ↓
XLSX 파싱 → EmployeeData[] 변환
    ↓
allData State 업데이트
    ↓
UI 렌더링 (모든 사용자에게 반영)
```

### 일반 사용자가 접속할 때

```
페이지 로드
    ↓
GET /api/data로 서버에서 파일 다운로드
    ↓
XLSX 파싱 → EmployeeData[] 변환
    ↓
allData State 업데이트
    ↓
getCurrentData() - 필터링 및 정렬
    ↓
UI 렌더링 (TOP 3 + 나머지 순위)
```

## 🎨 UI/UX 특징

### 색상 시스템
- **주황색 계열**: 메인 테마 (1위, 하이라이트)
- **회색**: 2위
- **황금색**: 3위
- **동적 지점 색상**: 7가지 팔레트에서 자동 할당

### 애니메이션
- 탭 전환 시 순위 슬라이드 효과
- TOP 3 등장 애니메이션
- 뉴스 마퀴 무한 스크롤
- 부드러운 hover 효과

### 반응형 디자인
- 모바일 우선 디자인
- 스와이프 제스처 지원
- 최대 너비 제한으로 가독성 확보
- 작은 화면에 최적화된 폰트 크기

## 🔒 데이터 보안

- 엑셀 파일은 서버의 `uploads/` 폴더에 저장 (Git에서 제외됨)
- 외부 DB 없음 - 파일 시스템만 사용
- 민감한 정보 없음 (사번, 이름, 성적만)
- CORS 설정으로 허용된 도메인만 접근 가능

### 보안 권장사항

프로덕션 환경에서는:
1. **인증 추가**: 관리자 페이지에 비밀번호 설정
2. **HTTPS 사용**: SSL 인증서 설정
3. **파일 검증**: 업로드 시 파일 내용 검증
4. **환경 변수**: API URL을 환경 변수로 관리

## 📈 성능 최적화

- **Vite**: 빠른 개발 서버 및 빌드
- **React 18**: 자동 배치 업데이트
- **동적 임포트**: 필요한 컴포넌트만 로드
- **메모이제이션**: 불필요한 재계산 방지
- **Tailwind CSS**: 미사용 CSS 제거

## 🐛 트러블슈팅

### 서버 연결 오류

**증상:** "서버에서 데이터를 불러올 수 없습니다"

**해결:**
1. 백엔드 서버가 실행 중인지 확인
   ```bash
   npm run server
   ```
2. 서버 콘솔에서 "🚀 서버가 시작되었습니다!" 메시지 확인
3. 브라우저에서 `http://localhost:3001/api/health` 접속하여 서버 상태 확인
4. 포트 3001이 다른 프로그램에서 사용 중인지 확인

### 엑셀 파일이 로드되지 않을 때

**증상:** 화면에 "데이터가 없습니다" 메시지 표시

**해결:**
1. 서버가 실행 중인지 확인 (`npm run server`)
2. "엑셀 파일 업로드" 버튼을 클릭하여 엑셀 파일 업로드
3. 엑셀 파일 형식이 올바른지 확인 (필수 컬럼 포함)
4. 브라우저 콘솔에서 오류 메시지 확인
5. 서버와 프론트엔드 모두 재시작

### 업로드한 파일이 다른 사용자에게 보이지 않을 때

**증상:** 관리자가 파일 업로드했는데 다른 브라우저에서 안 보임

**해결:**
1. 서버가 계속 실행 중인지 확인
2. 다른 사용자가 페이지를 새로고침했는지 확인
3. `uploads/latest.xlsx` 파일이 생성되었는지 확인
4. 서버 콘솔에서 "✅ 파일 업로드 성공" 메시지 확인

### 데이터가 표시되지 않을 때

**증상:** 파일은 업로드됐는데 화면이 비어있음

**해결:**
1. 엑셀 파일 형식이 올바른지 확인 (필수 컬럼 포함)
2. 사번 검색 시 정확한 사번 입력 확인
3. 브라우저 콘솔에서 "로드된 데이터: N명" 메시지 확인
4. 데이터가 3개 미만이면 TOP 3가 표시되지 않음
5. 엑셀 파일에 빈 행이 없는지 확인

### 순위가 이상할 때

**증상:** 순위가 뒤죽박죽

**해결:**
1. 성적(점수) 데이터가 숫자 형식인지 확인
2. 쉼표(,)가 포함된 경우 자동으로 제거됨
3. 동점자는 엑셀 파일 순서대로 정렬됨
4. 필터링 조건 확인 (지점/지역단/신인)

## 🚢 배포

### ⚠️ 주의사항
이 프로젝트는 **백엔드 서버가 필요**합니다. 정적 호스팅만으로는 작동하지 않습니다!

### 추천 배포 방법

#### 옵션 1: Vercel (프론트엔드) + Render (백엔드) ⭐

**프론트엔드 (Vercel):**
```bash
# Vercel CLI 설치
npm install -g vercel

# 빌드 및 배포
vercel
```

**백엔드 (Render.com):**
1. [Render.com](https://render.com) 가입
2. "New Web Service" 선택
3. GitHub 저장소 연결
4. Build Command: `npm install`
5. Start Command: `node server.cjs`
6. 배포된 서버 URL을 프론트엔드에 설정

**환경 변수 설정:**
```javascript
// remixed.tsx에서 서버 URL 변경
const API_URL = process.env.VITE_API_URL || 'http://localhost:3001';
```

#### 옵션 2: 동일 서버에 배포

```bash
# Express에서 빌드된 프론트엔드도 서빙
# server.cjs에 추가:
app.use(express.static('dist'));
```

### Heroku 배포 (무료 티어 종료됨)

대안으로 **Railway.app** 또는 **Fly.io** 사용 가능

### 일반 VPS 배포 (DigitalOcean, AWS EC2 등)

```bash
# 서버에서
git clone [repository]
cd dashboard
npm install

# PM2로 백엔드 실행
npm install -g pm2
pm2 start server.cjs --name "dashboard-api"

# Nginx로 프록시 설정
# /etc/nginx/sites-available/dashboard
```

## 📝 구현 완료 ✅

- [x] **백엔드 서버 구현** (Express + 파일 저장)
- [x] **관리자 업로드 기능** (모든 사용자 공유)
- [x] **동적 랭킹 시스템** (지점/지역단/신인)
- [x] **사번 검색 기능**
- [x] **TOP 3 시각화**
- [x] **실시간 뉴스 마퀴**
- [x] **반응형 디자인**

## 📝 향후 개선 사항

- [ ] 관리자 인증 시스템
- [ ] 다크 모드 지원
- [ ] 순위 변동 히스토리 추적
- [ ] PDF 리포트 생성
- [ ] 모바일 앱 변환 (PWA)
- [ ] 다국어 지원 (i18n)
- [ ] 데이터베이스 연동 (PostgreSQL/MongoDB)
- [ ] 실시간 업데이트 (WebSocket)

## 🤝 기여

이슈 및 풀 리퀘스트 환영합니다!

## 📄 라이선스

MIT License

## 👨‍💻 개발자

Dashboard Project Team

---

**Made with ❤️ using React & TypeScript**
